<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>LMS Layered Architecture — Prototype</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#60a5fa;--muted:#94a3b8;--glass:rgba(255,255,255,0.03)}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial; margin:0; background:linear-gradient(180deg,#071029 0%, #082033 100%); color:#e6eef8}
    header{padding:24px; display:flex; gap:16px; align-items:center}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7dd3fc);display:flex;align-items:center;justify-content:center;font-weight:700;color:#04263b}
    main{display:grid;grid-template-columns:360px 1fr;gap:18px;padding:18px}
    .card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    h1{margin:0;font-size:20px}
    p.small{color:var(--muted);font-size:13px}
    nav ul{list-style:none;padding:0;margin:12px 0;display:flex;flex-direction:column;gap:8px}
    nav a{color:#cde7ff;text-decoration:none;padding:8px;border-radius:8px;display:block}
    nav a:hover{background:var(--glass)}
    section.content{padding:16px}
    pre{background:#021226;padding:12px;border-radius:8px;overflow:auto}
    .uipanel{display:flex;flex-direction:column;gap:10px}
    label{font-size:13px;color:var(--muted)}
    input,select,button{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    button{cursor:pointer}
    .ok{background:linear-gradient(90deg,#10b981,#34d399);border:none;color:#022;}
    .muted{color:var(--muted);font-size:13px}
    .flex{display:flex;gap:8px;align-items:center}
    .svgwrap{background:#021022;padding:12px;border-radius:8px;overflow:auto}
    footer{padding:12px;text-align:center;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="logo">LMS</div>
    <div>
      <h1>University LMS — Layered Architecture Prototype</h1>
      <p class="small">Presentation + Business Logic + Data Access layers demonstrated in a single-file prototype (front-end + simulated backend).</p>
    </div>
  </header>

  <main>
    <aside class="card">
      <h2>Quick Links</h2>
      <nav>
        <ul>
          <li><a href="#architecture">Architecture Overview</a></li>
          <li><a href="#layers">Layer Responsibilities</a></li>
          <li><a href="#uml">UML (Class Diagram)</a></li>
          <li><a href="#prototype">Interactive Prototype</a></li>
          <li><a href="#deploy">Deploy to GitHub</a></li>
        </ul>
      </nav>

      <h3>Repository Structure (suggested)</h3>
      <pre>
lms-project/
├─ frontend/
│  ├─ public/index.html  (this file)
│  └─ src/ (React/Vue/Plain JS)
├─ backend/
│  ├─ src/
│  └─ Dockerfile
├─ docs/
└─ README.md
      </pre>

      <h3>Sample API Endpoints (REST)</h3>
      <pre>
GET /api/courses
POST /api/enrollments
GET /api/students/:id/grades
POST /api/assignments
PUT /api/submissions/:id/grade
      </pre>

      <h3>Notes</h3>
      <p class="muted">This is a static prototype: it simulates the Business and Data Access layers in JavaScript and stores data in <code>localStorage</code>. Use the repo structure above to implement a real backend (Node/Express, Django, Spring Boot, etc.) and a DB (Postgres/Mongo).</p>
    </aside>

    <section class="card content">
      <article id="architecture">
        <h2>Layered Architecture — Overview</h2>
        <p class="muted">A layered design separates responsibilities into Presentation, Business Logic (Service layer), and Data Access layers. This reduces coupling, improves maintainability, and makes it easier to test and deploy each layer independently.</p>

        <h3 id="layers">Layer Responsibilities</h3>
        <ul>
          <li><strong>Presentation Layer</strong>: UI, routing, input validation (client-side), and rendering. Talks to Business Logic through well-defined APIs.</li>
          <li><strong>Business Logic Layer</strong>: Application rules (enrollment rules, grade calculations, deadlines, notifications). Exposes services like <code>EnrollStudent</code>, <code>SubmitAssignment</code>, <code>CalculateGPA</code>.</li>
          <li><strong>Data Access Layer</strong>: CRUD operations, DB connections, repositories/DAOs. Responsible for transactions, migrations, and queries.</li>
        </ul>

        <h3>Why Layered Architecture fits an LMS</h3>
        <ol>
          <li><strong>Separation of concerns</strong> — UI designers and backend developers can work independently.</li>
          <li><strong>Testability</strong> — business rules are isolated and can be unit-tested without UI or DB.</li>
          <li><strong>Scalability</strong> — data services can be scaled separately, and microservices can be derived from layers when needed.</li>
          <li><strong>Reusability</strong> — services (grading, notifications) can be reused by different clients (web, mobile).</li>
        </ol>
      </article>

      <article id="uml">
        <h2>UML — Class Diagram</h2>
        <p class="muted">Below is a compact UML class diagram showing core domain classes and relationships.</p>
        <div class="svgwrap">
          <!-- Inline SVG UML diagram -->
          <svg xmlns="http://www.w3.org/2000/svg" width="900" height="420" viewBox="0 0 900 420">
            <style>
              .cls{fill:#041824;stroke:#7dd3fc;stroke-width:1.2}
              .txt{font-family:Arial, Helvetica, sans-serif; font-size:12px; fill:#cfeeff}
              .title{font-weight:700; font-size:13px; fill:#e6f9ff}
            </style>

            <!-- Student -->
            <rect x="20" y="20" width="200" height="90" rx="6" class="cls" />
            <text x="28" y="38" class="title">Student</text>
            <text x="28" y="58" class="txt">- studentId: String</text>
            <text x="28" y="74" class="txt">- name: String</text>
            <text x="28" y="90" class="txt">+ enroll(courseId): Enrollment</text>

            <!-- Instructor -->
            <rect x="260" y="20" width="200" height="90" rx="6" class="cls" />
            <text x="268" y="38" class="title">Instructor</text>
            <text x="268" y="58" class="txt">- instructorId: String</text>
            <text x="268" y="74" class="txt">- name: String</text>
            <text x="268" y="90" class="txt">+ createAssignment(courseId)</text>

            <!-- Course -->
            <rect x="500" y="20" width="220" height="110" rx="6" class="cls" />
            <text x="508" y="38" class="title">Course</text>
            <text x="508" y="58" class="txt">- courseId: String</text>
            <text x="508" y="74" class="txt">- title: String</text>
            <text x="508" y="90" class="txt">- credits: int</text>
            <text x="508" y="106" class="txt">+ addStudent(studentId)</text>

            <!-- Enrollment -->
            <rect x="20" y="140" width="240" height="80" rx="6" class="cls" />
            <text x="28" y="158" class="title">Enrollment</text>
            <text x="28" y="178" class="txt">- enrollmentId: String</text>
            <text x="28" y="196" class="txt">- studentId: String</text>
            <text x="28" y="214" class="txt">- courseId: String</text>

            <!-- Assignment -->
            <rect x="300" y="140" width="240" height="90" rx="6" class="cls" />
            <text x="308" y="158" class="title">Assignment</text>
            <text x="308" y="178" class="txt">- assignmentId: String</text>
            <text x="308" y="194" class="txt">- title: String</text>
            <text x="308" y="210" class="txt">- dueDate: Date</text>

            <!-- Submission / Grade -->
            <rect x="580" y="140" width="260" height="100" rx="6" class="cls" />
            <text x="588" y="158" class="title">Submission</text>
            <text x="588" y="178" class="txt">- submissionId: String</text>
            <text x="588" y="194" class="txt">- assignmentId: String</text>
            <text x="588" y="210" class="txt">- studentId: String</text>
            <text x="588" y="226" class="txt">- grade: Grade</text>

            <!-- Relationships as lines -->
            <line x1="220" y1="65" x2="260" y2="65" stroke="#7dd3fc" stroke-width="1" />
            <text x="240" y="58" class="txt">(inherits/peer)</text>

            <line x1="120" y1="110" x2="120" y2="140" stroke="#7dd3fc" stroke-width="1" marker-end="url(#arrow)" />

            <line x1="430" y1="65" x2="500" y2="65" stroke="#7dd3fc" stroke-width="1" marker-end="url(#arrow)" />

            <line x1="240" y1="180" x2="300" y2="180" stroke="#7dd3fc" stroke-width="1" marker-end="url(#arrow)" />
            <line x1="520" y1="120" x2="580" y2="190" stroke="#7dd3fc" stroke-width="1" marker-end="url(#arrow)" />

            <defs>
              <marker id="arrow" viewBox="0 0 10 10" refX="6" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                <path d="M 0 0 L 10 5 L 0 10 z" fill="#7dd3fc" />
              </marker>
            </defs>

          </svg>
        </div>
      </article>

      <article id="prototype">
        <h2>Interactive Prototype (client-only)</h2>
        <p class="muted">This small UI demonstrates Presentation calling Business services which use a Data Access adapter (simulated).</p>

        <div class="uipanel card">
          <div class="flex">
            <div style="flex:1">
              <label>Role</label>
              <select id="role">
                <option value="student">Student</option>
                <option value="instructor">Instructor</option>
              </select>
            </div>
            <div style="flex:2">
              <label>User name</label>
              <input id="username" placeholder="Enter name" />
            </div>
            <div style="align-self:flex-end">
              <button id="loginBtn" class="ok">Login / Create</button>
            </div>
          </div>

          <div id="controls" style="display:none;margin-top:12px">
            <div class="flex">
              <div style="flex:2">
                <label>Course Title</label>
                <input id="courseTitle" placeholder="e.g. CS101" />
              </div>
              <div style="align-self:flex-end">
                <button id="createCourse">Create Course</button>
              </div>
            </div>

            <div style="display:flex;gap:8px;margin-top:8px">
              <div style="flex:1">
                <label>Pick Course</label>
                <select id="courseSelect"></select>
              </div>
              <div style="flex:1">
                <label>Action</label>
                <select id="actionSelect">
                  <option value="enroll">Enroll (student)</option>
                  <option value="createAssignment">Create Assignment (instructor)</option>
                  <option value="submit">Submit Assignment (student)</option>
                  <option value="grade">Grade Submission (instructor)</option>
                </select>
              </div>
              <div style="align-self:flex-end">
                <button id="doAction">Do Action</button>
              </div>
            </div>

            <div id="log" style="margin-top:12px;background:#021226;padding:10px;border-radius:8px;height:160px;overflow:auto"></div>
          </div>
        </div>

        <script>
          /*************** Simple prototype layers in JS ***************/
          // Data Access Layer (DAL) - adapter over localStorage
          const DAL = {
            read(key){
              const s = localStorage.getItem(key);
              return s ? JSON.parse(s) : null;
            },
            write(key, val){ localStorage.setItem(key, JSON.stringify(val)); },
            init(){
              if(!this.read('lms')){
                this.write('lms',{users:[],courses:[],enrollments:[],assignments:[],submissions:[]});
              }
            },
            getState(){ return this.read('lms'); }
          };

          // Business Logic Layer (BLL)
          const BLL = {
            init(){ DAL.init(); },
            createUser({name,role}){
              const db = DAL.getState();
              const id = 'u'+Date.now();
              const user = {id,name,role};
              db.users.push(user); DAL.write('lms',db); return user;
            },
            createCourse({title,creatorId}){
              const db = DAL.getState();
              const id = 'c'+Date.now();
              const course = {id,title,creatorId,credits:3};
              db.courses.push(course); DAL.write('lms',db); return course;
            },
            enrollStudent({studentId,courseId}){
              const db = DAL.getState();
              const id = 'e'+Date.now();
              const enrollment = {id,studentId,courseId};
              db.enrollments.push(enrollment); DAL.write('lms',db); return enrollment;
            },
            createAssignment({courseId, title}){
              const db = DAL.getState();
              const id = 'a'+Date.now();
              const asg = {id,courseId,title,dueDate: new Date().toISOString()};
              db.assignments.push(asg); DAL.write('lms',db); return asg;
            },
            submitAssignment({assignmentId, studentId, content}){
              const db = DAL.getState();
              const id = 's'+Date.now();
              const sub = {id,assignmentId,studentId,content,grade:null};
              db.submissions.push(sub); DAL.write('lms',db); return sub;
            },
            gradeSubmission({submissionId, grade}){
              const db = DAL.getState();
              const s = db.submissions.find(x=>x.id===submissionId);
              if(!s) throw new Error('submission not found');
              s.grade = grade; DAL.write('lms',db); return s;
            }
          };

          // Presentation Layer (PL) - UI interactions
          (function(){
            BLL.init();
            const loginBtn = document.getElementById('loginBtn');
            const controls = document.getElementById('controls');
            const log = document.getElementById('log');
            const courseSelect = document.getElementById('courseSelect');

            function appendLog(txt){ log.innerHTML += `<div style='margin-bottom:6px'>${txt}</div>`; log.scrollTop = log.scrollHeight; }

            function refreshCourses(){
              const db = DAL.getState();
              courseSelect.innerHTML = '';
              db.courses.forEach(c=>{
                const opt = document.createElement('option'); opt.value = c.id; opt.textContent = c.title+' ('+c.id+')'; courseSelect.appendChild(opt);
              });
            }

            loginBtn.addEventListener('click',()=>{
              const role = document.getElementById('role').value;
              const name = document.getElementById('username').value || (role+'_'+Date.now());
              const u = BLL.createUser({name,role});
              appendLog(`Logged in as ${u.name} [${u.role}] id=${u.id}`);
              controls.style.display = 'block';
              window.currentUser = u;
              refreshCourses();
            });

            document.getElementById('createCourse').addEventListener('click', ()=>{
              const title = document.getElementById('courseTitle').value || 'Course_'+Date.now();
              const c = BLL.createCourse({title,creatorId: window.currentUser.id});
              appendLog(`Created course ${c.title} id=${c.id}`);
              refreshCourses();
            });

            document.getElementById('doAction').addEventListener('click', ()=>{
              const action = document.getElementById('actionSelect').value;
              const courseId = courseSelect.value;
              try{
                if(action==='enroll'){
                  if(window.currentUser.role!=='student') throw new Error('Only students can enroll');
                  const e = BLL.enrollStudent({studentId:window.currentUser.id, courseId});
                  appendLog(`Enrolled in ${courseId} enrollmentId=${e.id}`);
                } else if(action==='createAssignment'){
                  if(window.currentUser.role!=='instructor') throw new Error('Only instructors create assignments');
                  const a = BLL.createAssignment({courseId,title:'Asg_'+Date.now()});
                  appendLog(`Created assignment ${a.id} for course ${courseId}`);
                } else if(action==='submit'){
                  if(window.currentUser.role!=='student') throw new Error('Only students submit');
                  const db = DAL.getState();
                  const asg = db.assignments.find(x=>x.courseId===courseId);
                  if(!asg) throw new Error('No assignment found for this course');
                  const s = BLL.submitAssignment({assignmentId:asg.id, studentId:window.currentUser.id, content:'My work'});
                  appendLog(`Submitted assignment ${s.id}`);
                } else if(action==='grade'){
                  if(window.currentUser.role!=='instructor') throw new Error('Only instructors grade');
                  const db = DAL.getState();
                  const sub = db.submissions.find(x=>{ const a = db.assignments.find(b=>b.id===x.assignmentId); return a && a.courseId===courseId && x.grade===null; });
                  if(!sub) throw new Error('No ungraded submissions found');
                  const s = BLL.gradeSubmission({submissionId:sub.id, grade: Math.floor(Math.random()*41)+60});
                  appendLog(`Graded submission ${s.id} -> ${s.grade}`);
                }
              }catch(err){ appendLog('Error: '+err.message); }
            });

            // initial load
            refreshCourses();
          })();
        </script>

      </article>

      <article id="deploy">
        <h2>Deploying the prototype to GitHub (steps)</h2>
        <p class="muted">The prototype is a single HTML file. To deploy to GitHub and make it available publicly (GitHub Pages):</p>
        <ol>
          <li>Create a new repository on GitHub (e.g. <code>univ-lms-prototype</code>).</li>
          <li>On your machine, initialize and push:
            <pre>
mkdir univ-lms-prototype
cd univ-lms-prototype
# copy this file to index.html
git init
git add index.html
git commit -m "Initial LMS prototype"
git branch -M main
git remote add origin https://github.com/&lt;your-username&gt;/univ-lms-prototype.git
git push -u origin main
            </pre>
          </li>
          <li>Enable GitHub Pages: Repository &gt; Settings &gt; Pages &gt; Source &gt; main branch / (root) &gt; Save. Your site will be published at <code>https://&lt;your-username&gt;.github.io/univ-lms-prototype/</code>.</li>
          <li>To expand into a real app, add a backend folder, create a REST API, and push both folders. Use GitHub Actions / Docker to build and deploy to a cloud host (Heroku, Render, Azure, AWS).</li>
        </ol>

        <h3>Checklist to convert prototype to production</h3>
        <ul>
          <li>Replace localStorage DAL with a real DB + repository layer.</li>
          <li>Move BLL to a backend service with unit tests.</li>
          <li>Secure endpoints (JWT/OAuth), input validation, role-based access control.</li>
          <li>CI/CD pipeline, automated tests, and backups.</li>
        </ul>
      </article>

    </section>
  </main>

  <footer>
    <div>Created as a deployable <strong>index.html</strong> prototype — copy this file into your repository as <code>index.html</code>.</div>
  </footer>
</body>
</html>
